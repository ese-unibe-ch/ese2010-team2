#{extends 'main.html' /}
#{set title:'ESE KB - Search' /}
<a href="/">back</a>
<form action="@{Application.Search()}" method="GET">
	<br>
	<input type="text" name="text" value="${text}"><input type="submit" value="Search" /><br>
	<p>Order: QuestionTags-->QuestionContent-->AnswerContent-->Comments</p>
	<br>
	<br>
</form>
<h3>${message}</h3>

#{list items:questionTagResults, as:'question'}
<fieldset>
	<p><a href="@{Application.showAnswers(question.getId())}" />${question.getHtml().raw()}</a></p>
	<p>
		by ${question.getOwner()}
		#{avatar user:question.getOwner() /}
	</p>
	<p>Score: ${question.getScore()}</p>
	<legend class="question" align="bottom">Tag / ${question.getDate()}</legend>
	<h6>Tags:
	#{ifnot question.getTags()}
		none
	#{/ifnot}
	#{list items:question.getTags(), as:'tag'}
		#${tag}
	#{/list}
	</h6>
</fieldset>
#{/list}

#{list items:questionContentResults, as:'question'}
<fieldset>
	<p><a href="@{Application.showAnswers(question.getId())}" />${question.getHtml().raw()}</a></p>
	<p>
		by ${question.getOwner()}
		#{avatar user:question.getOwner() /}
	</p>
	<p>Score: ${question.getScore()}</p>
	<legend class="question" align="bottom">Question / ${question.getDate()}</legend>
	<h6>Tags:
	#{ifnot question.getTags()}
		none
	#{/ifnot}
	#{list items:question.getTags(), as:'tag'}
		#${tag}
	#{/list}
	</h6>
</fieldset>
#{/list}

#{list items:answerContentResults, as:'answer'}
<fieldset>
	#{if answer.isBestAnswer()}
	<span class="bestanswer">Best answer according to OP</span>
	#{/if}
	<p><a href="@{Application.showAnswers(question.getId())}" />${answer.getHtml().raw()}</a><p>
	<p>
		by ${answer.getOwner()}
		#{avatar user:answer.getOwner() /}
	</p>
	<p>Score: ${answer.getScore()}</p>
	<legend class="question" align="bottom">Answer / ${answer.getDate()}</legend>
</fieldset>
#{/list}

#{list items:commentResults, as:'comment'}
<fieldset>
	<p>${comment.getContent()}</p>
	<p>by ${comment.getOwner()}</p>
	<br>
	<a href="@{Application.showAnswers(comment.getCommentedVotable().getId())}"/><h6>-->Link to Commented Question/Answer</h4></a>
	<legend class="question" align="bottom">Comment / ${comment.getDate()}</legend>
</fieldset>
#{/list}
