#{extends 'main.html' /}
#{set title:'ESE KB Answers' /}

<a href="/">back</a>

<h2>Question #${question.getId()}</h2>
#{question question:question /}
#{if question.getComments().size()!=0}
<div class="comments">
		<h3>Comments to this question</h3>

		#{list items:question.getComments(), as:'comment'}
		<div class="comment">
			Posted on <strong>${comment.getDate()}</strong> by <strong>${comment.getOwner()}</strong>
			<p class="comment_text">${comment.getContent()}</p>
		</div>
			#{if session.uid && comment.ownerIs(session.uid)}
			<a href="@{Admin.showEditCommentForm(question.getId(), comment.getId())}">edit comment</a>
			#{/if}
		#{/list}
</div>
#{/if}


<h2>Answers</h2>

<!--List of all answers-->
#{list items:answers, as:'answer'}
#{answer answer:answer, question:question /}
#{/list}

<!--Answer form-->
<fieldset>
 <legend>Your Answer</legend>
	<form action="@{Admin.addAnswer(question.getId())}" method="GET">
	<table>
		<tr>
			<td>Enter your Answer:</td>
			<td><textarea id="newAnswer" name="newAnswer" cols="50" rows="5"></textarea></td>
		</tr>
		<tr>
			<td></td>
			<td><input type="submit" value="Post your Answers!" /></td>
		</tr>
	</table>
	</form>
</fieldset>
